{"ast":null,"code":"import _slicedToArray from\"/home/igor/Kenzie - M3/Entregas/Formul\\xE1rio-sem-tsx/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import axios from\"axios\";import{createContext,useContext}from\"react\";import{UserContext}from\"./UserContext\";import{useState}from\"react\";import{useEffect}from\"react\";import Swal from\"sweetalert2\";//tive que fazer a exportação assim, já que dizia que não eram suportadas multiplas exportações. \n//LEMBRETE: procurar o motivo deste erro depois!!!\nimport{jsx as _jsx}from\"react/jsx-runtime\";export var TechsContext=/*#__PURE__*/createContext({addTech:function addTech(){return null;},deleteTech:function deleteTech(){return null;}});export var TechsContextProvider=function TechsContextProvider(_ref){var children=_ref.children;var _useContext=useContext(UserContext),user=_useContext.user;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),techs=_useState2[0],setTechs=_useState2[1];var token=localStorage.getItem('userToken');var res={headers:{Authorization:\"Bearer \".concat(token)}};//não entendi como resolver a questão do array com as techs. VER DEPOIS!!!\nuseEffect(function(){axios.get(\"https://kenziehub.herokuapp.com/profile\",res).then(function(response){return setTechs(response.data.techs);}).catch(function(err){return console.log(err);});},[techs]);function addTech(data){axios.post('https://kenziehub.herokuapp.com/users/techs',data,{headers:{Authorization:\"Bearer \".concat(token)}}).then(function(response){Swal.showLoading();setTimeout(function(){Swal.fire({icon:\"success\",tittle:\"Tecnologia adicionada com sucesso!!\",text:\"Boa!!\"});axios.get(\"https://kenziehub.herokuapp.com/profile\",res).then(function(response){return setTechs(response.data.techs);}).catch(function(err){return console.log(err);});},\"3000\");}).catch(function(err){Swal.fire({icon:\"error\",title:\"Eita!\",text:\"Essa tecnologia já foi add por você antes.\"});});}function deleteTech(id){axios.delete(\"https://kenziehub.herokuapp.com/users/techs/\".concat(id),res).then(Swal.fire({incon:\"success\",tittle:\"Tecnologia excluida com sucesso\",text:\"A tecnologia selecionada foi exluida\"}));axios.get(\"https://kenziehub.herokuapp.com/profile\",res).then(function(response){return setTechs(response.data.techs);}).catch(function(err){return console.log(err);});}return/*#__PURE__*/_jsx(TechsContext.Provider,{value:{techs:techs,addTech:addTech,deleteTech:deleteTech},children:children});};","map":{"version":3,"names":["axios","createContext","useContext","UserContext","useState","useEffect","Swal","TechsContext","addTech","deleteTech","TechsContextProvider","children","user","techs","setTechs","token","localStorage","getItem","res","headers","Authorization","get","then","response","data","catch","err","console","log","post","showLoading","setTimeout","fire","icon","tittle","text","title","id","delete","incon"],"sources":["/home/igor/Kenzie - M3/Entregas/Formulário-sem-tsx/src/contexts/TechsContext.jsx"],"sourcesContent":["import axios from \"axios\"\n\nimport { createContext, useContext } from \"react\"\nimport { UserContext } from \"./UserContext\"\nimport { useState } from \"react\"\nimport { useEffect } from \"react\"\n\nimport Swal from \"sweetalert2\"\n\n//tive que fazer a exportação assim, já que dizia que não eram suportadas multiplas exportações. \n//LEMBRETE: procurar o motivo deste erro depois!!!\nexport const TechsContext = createContext({\n    addTech: () => null,\n    deleteTech: () => null\n})\n\nexport const TechsContextProvider = ({children}) => {\n\n    const {user} = useContext(UserContext)\n    const [techs, setTechs] = useState([])\n    const token = localStorage.getItem('userToken')\n    const res = {\n        headers: {\n          Authorization: `Bearer ${token}`,\n        }\n      }\n    \n      //não entendi como resolver a questão do array com as techs. VER DEPOIS!!!\n      useEffect(() => {\n        axios\n          .get(\"https://kenziehub.herokuapp.com/profile\", res)\n          .then((response) => setTechs(response.data.techs))\n          .catch((err) => console.log(err))\n      }, [techs])\n\n\n    function addTech(data) {\n           axios\n           .post('https://kenziehub.herokuapp.com/users/techs', data, {\n                headers: {\n                    Authorization: `Bearer ${token}`\n                },\n           })    \n            .then((response) => {\n                Swal.showLoading();\n                setTimeout(() => {\n                  Swal.fire({\n                    icon: \"success\", \n                    tittle: \"Tecnologia adicionada com sucesso!!\", \n                    text: \"Boa!!\"})\n\n            axios\n                .get(\"https://kenziehub.herokuapp.com/profile\", res)\n                .then((response) => setTechs(response.data.techs))\n                .catch((err) => console.log(err))\n                }, \"3000\")\n              })    \n               .catch ((err) => {\n                Swal.fire({\n                    icon: \"error\",\n                    title: \"Eita!\",\n                    text: \"Essa tecnologia já foi add por você antes.\",\n                  })\n                })\n    }\n\n    function deleteTech(id) {\n        axios\n          .delete(`https://kenziehub.herokuapp.com/users/techs/${id}`, res)\n          .then(\n            Swal.fire({\n                incon: \"success\",\n                tittle: \"Tecnologia excluida com sucesso\",\n                text: \"A tecnologia selecionada foi exluida\",\n            })\n          )\n          \n          axios\n          .get(\"https://kenziehub.herokuapp.com/profile\", res)\n          .then((response) => setTechs(response.data.techs))\n          .catch((err) => console.log(err));\n      }\n\n\n\n    return (\n        <TechsContext.Provider value={{techs, addTech, deleteTech}}>\n            {children}\n        </TechsContext.Provider>   \n    )\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}