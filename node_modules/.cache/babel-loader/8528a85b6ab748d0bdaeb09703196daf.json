{"ast":null,"code":"import _objectSpread from\"/home/igor/Kenzie - M3/Entregas/Formul\\xE1rio-sem-tsx/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{useForm}from\"react-hook-form\";import{useContext}from\"react\";import{yupResolver}from\"@hookform/resolvers/yup\";import*as yup from\"yup\";import{useEffect}from\"react\";import{useNavigate}from\"react-router-dom\";//usado para colocar o navigate dentro do useEffect\nimport{useRef}from\"react\";import{MyLogin}from\"./Styles/Login\";import{UserContext}from\"../contexts/UserContext\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function Login(){var _errors$email,_errors$password;//novo navigate para clicar no botão de REGISTRAR e voltar para o LOGIN. \n//tive que referenciar para poder utilizar dentro do useEffect\n//useRef retorna apenas um item. Nesse caso, meu useNavigate, que é o valor inicial dele.\nvar navigate=useNavigate();var token=localStorage.getItem(\"authToken\");useEffect(function(){//se foi autentificado, vamos para a dashboard\nif(token){//meu useRef retorna um object, que é o current\nnavigate.current.navigate(\"/dashboard\");}},[]);var _useContext=useContext(UserContext),addUser=_useContext.addUser;//usando o YUP para definir meu formulário e os campos obrigatórios. \nvar validation=yup.object().shape({email:yup.string().required(\"Campo obrigatório\"),password:yup.string().required(\"Campo obrigatório\")});//const que gera alerta de errors quando o form não cumpre os requisitos. puxa a função Validation.\nvar _useForm=useForm({resolver:yupResolver(validation)}),register=_useForm.register,handleSubmit=_useForm.handleSubmit,errors=_useForm.formState.errors;//cheguei a trocar o addUser pelo \"signIn\" que está lá embaixo. Mas deu tudo errado e retornei.\n//pega meus dados, dá os alertas necessários e depois, em caso de erro, me mostra os erros e os alertas.\n/*const addUser = (data) => {\n    axios\n      .post(\"https://kenziehub.herokuapp.com/sessions\", data)\n      .then((response) => {\n        window.localStorage.clear();\n        window.localStorage.setItem(\"authToken\", response.data.token)\n        window.localStorage.setItem(\"userName\", response.data.user.name)\n        Swal.fire(\"Você entrou com sucesso!\",\n        \"Redirecionando usuário...\",\n        \"Successo!\")\n        navigate(\"/dashboard\")\n        console.log(response)})\n\n      .catch((err) => {\n        console.log(err)\n        Swal.fire({\n          icon: \"error\",\n          title: \"Eita!\",\n          text: \"Você não possui cadastro! =(\",\n        })\n      })\n    console.log(data)}\n\n  usando o YUP para definir meu formulário e os campos obrigatórios.  \n  const validation = yup.object().shape({\n    email: yup.string().required(\"Este campo é obrigatório!\"),\n    password: yup.string().required(\"Este campo é obrigatório!\")})\n\n\n  //novo navigate para clicar no botão de REGISTRAR e voltar para o LOGIN.  \n  const navigate = useNavigate()\n\n  //const que gera alerta de errors quando o form não cumpre os requisitos. puxa a função Validation.\n  const {register, handleSubmit, formState: { errors }} = useForm({resolver: yupResolver(validation)})\n\n\n  //tentando usar o useContext.\n  const {signIn} = useContext(AuthContext)*/return/*#__PURE__*/_jsxs(MyLogin,{children:[/*#__PURE__*/_jsx(\"h1\",{className:\"Logo\",children:\"Kenzie Hub\"}),/*#__PURE__*/_jsxs(\"form\",{className:\"Form\",onSubmit:handleSubmit(addUser),children:[/*#__PURE__*/_jsx(\"h2\",{className:\"Tittle\",children:\"Login\"}),/*#__PURE__*/_jsxs(\"label\",{className:\"Email\",children:[\"E-mail\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"email\",className:\"Input1\",placeholder:\"E-mail\",name:\"email\"},register(\"email\"))),/*#__PURE__*/_jsx(\"p\",{className:\"Error2\",children:(_errors$email=errors.email)===null||_errors$email===void 0?void 0:_errors$email.message})]}),/*#__PURE__*/_jsxs(\"label\",{className:\"Password\",children:[\"Senha\",/*#__PURE__*/_jsx(\"input\",_objectSpread({type:\"password\",className:\"Input2\",placeholder:\"Senha\",name:\"password\"},register(\"password\"))),/*#__PURE__*/_jsx(\"p\",{className:\"Error\",children:(_errors$password=errors.password)===null||_errors$password===void 0?void 0:_errors$password.message})]}),/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"LoginBtn\",children:\"Entrar\"}),/*#__PURE__*/_jsx(\"h4\",{className:\"Quote\",children:\"Ainda n\\xE3o possui uma conta conosco?\"}),/*#__PURE__*/_jsx(\"button\",{type:\"button\",className:\"RegisterBtn\",onClick:function onClick(){return navigate(\"/register\");},children:\"Cadastre-se agora!\"})]})]});}export default Login;","map":{"version":3,"names":["useForm","useContext","yupResolver","yup","useEffect","useNavigate","useRef","MyLogin","UserContext","Login","navigate","token","localStorage","getItem","current","addUser","validation","object","shape","email","string","required","password","resolver","register","handleSubmit","errors","formState","message"],"sources":["/home/igor/Kenzie - M3/Entregas/Formulário-sem-tsx/src/components/Login.jsx"],"sourcesContent":["\nimport { useForm } from \"react-hook-form\"\n\nimport {useContext} from \"react\"\n\nimport { yupResolver } from \"@hookform/resolvers/yup\"\nimport * as yup from \"yup\"\nimport { useEffect } from \"react\"\nimport { useNavigate } from \"react-router-dom\"\n\n//usado para colocar o navigate dentro do useEffect\nimport { useRef } from \"react\"\n\nimport { MyLogin } from \"./Styles/Login\"\nimport { UserContext } from \"../contexts/UserContext\"\n\n\n\nfunction Login() {\n\n  //novo navigate para clicar no botão de REGISTRAR e voltar para o LOGIN. \n  //tive que referenciar para poder utilizar dentro do useEffect\n  //useRef retorna apenas um item. Nesse caso, meu useNavigate, que é o valor inicial dele.\n  const navigate = useNavigate()\n  const token = localStorage.getItem(\"authToken\")\n\n  \n  useEffect(() => {    \n    //se foi autentificado, vamos para a dashboard\n    if (token) {\n      //meu useRef retorna um object, que é o current\n      navigate.current.navigate(\"/dashboard\")\n    }\n  }, [])\n\n  const { addUser } = useContext(UserContext)\n\n  //usando o YUP para definir meu formulário e os campos obrigatórios. \n  const validation = yup.object().shape({\n    email: yup.string().required(\"Campo obrigatório\"),\n    password: yup.string().required(\"Campo obrigatório\"),})\n\n  //const que gera alerta de errors quando o form não cumpre os requisitos. puxa a função Validation.\n  const {register, handleSubmit, formState: { errors },} = useForm({resolver: yupResolver(validation),})\n  \n\n\n//cheguei a trocar o addUser pelo \"signIn\" que está lá embaixo. Mas deu tudo errado e retornei.\n//pega meus dados, dá os alertas necessários e depois, em caso de erro, me mostra os erros e os alertas.\n  /*const addUser = (data) => {\n    axios\n      .post(\"https://kenziehub.herokuapp.com/sessions\", data)\n      .then((response) => {\n        window.localStorage.clear();\n        window.localStorage.setItem(\"authToken\", response.data.token)\n        window.localStorage.setItem(\"userName\", response.data.user.name)\n        Swal.fire(\"Você entrou com sucesso!\",\n        \"Redirecionando usuário...\",\n        \"Successo!\")\n        navigate(\"/dashboard\")\n        console.log(response)})\n\n      .catch((err) => {\n        console.log(err)\n        Swal.fire({\n          icon: \"error\",\n          title: \"Eita!\",\n          text: \"Você não possui cadastro! =(\",\n        })\n      })\n    console.log(data)}\n\n  usando o YUP para definir meu formulário e os campos obrigatórios.  \n  const validation = yup.object().shape({\n    email: yup.string().required(\"Este campo é obrigatório!\"),\n    password: yup.string().required(\"Este campo é obrigatório!\")})\n\n\n  //novo navigate para clicar no botão de REGISTRAR e voltar para o LOGIN.  \n  const navigate = useNavigate()\n\n  //const que gera alerta de errors quando o form não cumpre os requisitos. puxa a função Validation.\n  const {register, handleSubmit, formState: { errors }} = useForm({resolver: yupResolver(validation)})\n\n\n  //tentando usar o useContext.\n  const {signIn} = useContext(AuthContext)*/\n  \n  \n  return (\n    <MyLogin>\n      <h1 className=\"Logo\">Kenzie Hub</h1>\n      <form className=\"Form\" onSubmit={handleSubmit(addUser)}>\n        <h2 className=\"Tittle\">Login</h2>\n        <label className=\"Email\">\n          E-mail\n          <input\n            type=\"email\"\n            className=\"Input1\"\n            placeholder=\"E-mail\"\n            name=\"email\"\n            {...register(\"email\")}\n          />\n          <p className=\"Error2\">{errors.email?.message}</p>\n        </label>\n        <label className=\"Password\">\n          Senha\n          <input\n            type=\"password\"\n            className=\"Input2\"\n            placeholder=\"Senha\"\n            name=\"password\"\n            {...register(\"password\")}\n          />\n          <p className=\"Error\">{errors.password?.message}</p>\n        </label>\n        <button type=\"submit\" className=\"LoginBtn\">\n          Entrar\n        </button>\n        <h4 className=\"Quote\">Ainda não possui uma conta conosco?</h4>\n        <button\n          type=\"button\"\n          className=\"RegisterBtn\"\n          onClick={() => navigate(\"/register\")}>Cadastre-se agora!\n        </button>\n      </form>\n    </MyLogin>\n  )\n}\n\nexport default Login"],"mappings":"0IACA,OAASA,OAAT,KAAwB,iBAAxB,CAEA,OAAQC,UAAR,KAAyB,OAAzB,CAEA,OAASC,WAAT,KAA4B,yBAA5B,CACA,MAAO,GAAKC,IAAZ,KAAqB,KAArB,CACA,OAASC,SAAT,KAA0B,OAA1B,CACA,OAASC,WAAT,KAA4B,kBAA5B,CAEA;AACA,OAASC,MAAT,KAAuB,OAAvB,CAEA,OAASC,OAAT,KAAwB,gBAAxB,CACA,OAASC,WAAT,KAA4B,yBAA5B,C,wFAIA,QAASC,MAAT,EAAiB,oCAEf;AACA;AACA;AACA,GAAMC,SAAQ,CAAGL,WAAW,EAA5B,CACA,GAAMM,MAAK,CAAGC,YAAY,CAACC,OAAb,CAAqB,WAArB,CAAd,CAGAT,SAAS,CAAC,UAAM,CACd;AACA,GAAIO,KAAJ,CAAW,CACT;AACAD,QAAQ,CAACI,OAAT,CAAiBJ,QAAjB,CAA0B,YAA1B,EACD,CACF,CANQ,CAMN,EANM,CAAT,CAQA,gBAAoBT,UAAU,CAACO,WAAD,CAA9B,CAAQO,OAAR,aAAQA,OAAR,CAEA;AACA,GAAMC,WAAU,CAAGb,GAAG,CAACc,MAAJ,GAAaC,KAAb,CAAmB,CACpCC,KAAK,CAAEhB,GAAG,CAACiB,MAAJ,GAAaC,QAAb,CAAsB,mBAAtB,CAD6B,CAEpCC,QAAQ,CAAEnB,GAAG,CAACiB,MAAJ,GAAaC,QAAb,CAAsB,mBAAtB,CAF0B,CAAnB,CAAnB,CAIA;AACA,aAAyDrB,OAAO,CAAC,CAACuB,QAAQ,CAAErB,WAAW,CAACc,UAAD,CAAtB,CAAD,CAAhE,CAAOQ,QAAP,UAAOA,QAAP,CAAiBC,YAAjB,UAAiBA,YAAjB,CAA4CC,MAA5C,UAA+BC,SAA/B,CAA4CD,MAA5C,CAIF;AACA;AACE;AACF;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4CAGE,mBACE,MAAC,OAAD,yBACE,WAAI,SAAS,CAAC,MAAd,wBADF,cAEE,cAAM,SAAS,CAAC,MAAhB,CAAuB,QAAQ,CAAED,YAAY,CAACV,OAAD,CAA7C,wBACE,WAAI,SAAS,CAAC,QAAd,mBADF,cAEE,eAAO,SAAS,CAAC,OAAjB,iCAEE,4BACE,IAAI,CAAC,OADP,CAEE,SAAS,CAAC,QAFZ,CAGE,WAAW,CAAC,QAHd,CAIE,IAAI,CAAC,OAJP,EAKMS,QAAQ,CAAC,OAAD,CALd,EAFF,cASE,UAAG,SAAS,CAAC,QAAb,yBAAuBE,MAAM,CAACP,KAA9B,wCAAuB,cAAcS,OAArC,EATF,GAFF,cAaE,eAAO,SAAS,CAAC,UAAjB,gCAEE,4BACE,IAAI,CAAC,UADP,CAEE,SAAS,CAAC,QAFZ,CAGE,WAAW,CAAC,OAHd,CAIE,IAAI,CAAC,UAJP,EAKMJ,QAAQ,CAAC,UAAD,CALd,EAFF,cASE,UAAG,SAAS,CAAC,OAAb,4BAAsBE,MAAM,CAACJ,QAA7B,2CAAsB,iBAAiBM,OAAvC,EATF,GAbF,cAwBE,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,UAAhC,oBAxBF,cA2BE,WAAI,SAAS,CAAC,OAAd,oDA3BF,cA4BE,eACE,IAAI,CAAC,QADP,CAEE,SAAS,CAAC,aAFZ,CAGE,OAAO,CAAE,yBAAMlB,SAAQ,CAAC,WAAD,CAAd,EAHX,gCA5BF,GAFF,GADF,CAuCD,CAED,cAAeD,MAAf"},"metadata":{},"sourceType":"module"}