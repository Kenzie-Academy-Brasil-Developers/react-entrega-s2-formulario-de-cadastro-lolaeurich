{"ast":null,"code":"var _jsxFileName = \"/home/igor/Kenzie - M3/Entregas/atividade-refeita/src/contexts/AuthContext.jsx\",\n    _s = $RefreshSig$();\n\nimport { createContext, useEffect, useState } from \"react\";\nimport { useNavigate } from \"react-router-dom\";\nimport api from \"../services/api\";\nimport axios from \"axios\"; //segui a demo, mas não toh entendendo nada. \n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const AuthContext = /*#__PURE__*/createContext({});\nexport const AuthProvider = _ref => {\n  _s();\n\n  let {\n    children\n  } = _ref;\n\n  const addUser = data => {\n    axios.post(\"https://kenziehub.herokuapp.com/sessions\", data).then(response => {\n      window.localStorage.clear();\n      window.localStorage.setItem(\"authToken\", response.data.token);\n      window.localStorage.setItem(\"userName\", response.data.user.name);\n      Swal.fire(\"Você entrou com sucesso!\", \"Redirecionando usuário...\", \"Successo!\");\n      navigate(\"/dashboard\");\n      console.log(response);\n    }).catch(err => {\n      console.log(err);\n      Swal.fire({\n        icon: \"error\",\n        title: \"Eita!\",\n        text: \"Você não possui cadastro! =(\"\n      });\n    });\n    console.log(data);\n  }; //usando o YUP para definir meu formulário e os campos obrigatórios.  \n\n\n  const validation = yup.object().shape({\n    email: yup.string().required(\"Este campo é obrigatório!\"),\n    password: yup.string().required(\"Este campo é obrigatório!\")\n  }); //novo navigate para clicar no botão de REGISTRAR e voltar para o LOGIN.  \n\n  const navigate = useNavigate(); //const que gera alerta de errors quando o form não cumpre os requisitos. puxa a função Validation.\n\n  const {\n    register,\n    handleSubmit,\n    formState: {\n      errors\n    }\n  } = useForm({\n    resolver: yupResolver(validation)\n  });\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: {\n      user,\n      sigIn,\n      loading\n    },\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthProvider, \"ouQBPqK9CoFkPYcu3QlamwlLd5Y=\", true, function () {\n  return [useNavigate];\n});\n\n_c = AuthProvider;\nexport default AuthProvider;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthProvider\");","map":{"version":3,"names":["createContext","useEffect","useState","useNavigate","api","axios","AuthContext","AuthProvider","children","addUser","data","post","then","response","window","localStorage","clear","setItem","token","user","name","Swal","fire","navigate","console","log","catch","err","icon","title","text","validation","yup","object","shape","email","string","required","password","register","handleSubmit","formState","errors","useForm","resolver","yupResolver","sigIn","loading"],"sources":["/home/igor/Kenzie - M3/Entregas/atividade-refeita/src/contexts/AuthContext.jsx"],"sourcesContent":["import {createContext, useEffect, useState} from \"react\"\nimport {useNavigate} from \"react-router-dom\"\nimport api from \"../services/api\"\nimport axios from \"axios\"\n\n//segui a demo, mas não toh entendendo nada. \nexport const AuthContext = createContext({})\nexport const AuthProvider = ({children}) => {\n    const addUser = (data) => {\n        axios\n          .post(\"https://kenziehub.herokuapp.com/sessions\", data)\n          .then((response) => {\n            window.localStorage.clear();\n            window.localStorage.setItem(\"authToken\", response.data.token)\n            window.localStorage.setItem(\"userName\", response.data.user.name)\n            Swal.fire(\"Você entrou com sucesso!\",\n            \"Redirecionando usuário...\",\n            \"Successo!\")\n            navigate(\"/dashboard\")\n            console.log(response)})\n    \n          .catch((err) => {\n            console.log(err)\n            Swal.fire({\n              icon: \"error\",\n              title: \"Eita!\",\n              text: \"Você não possui cadastro! =(\",\n            })\n          })\n        console.log(data)}\n    \n      //usando o YUP para definir meu formulário e os campos obrigatórios.  \n      const validation = yup.object().shape({\n        email: yup.string().required(\"Este campo é obrigatório!\"),\n        password: yup.string().required(\"Este campo é obrigatório!\")})\n    \n    \n      //novo navigate para clicar no botão de REGISTRAR e voltar para o LOGIN.  \n      const navigate = useNavigate()\n    \n      //const que gera alerta de errors quando o form não cumpre os requisitos. puxa a função Validation.\n      const {register, handleSubmit, formState: { errors }} = useForm({resolver: yupResolver(validation)})\n\n    return (\n        <AuthContext.Provider value={{user, sigIn, loading}}>\n            {children}\n        </AuthContext.Provider>\n    )\n    }\n\nexport default AuthProvider"],"mappings":";;;AAAA,SAAQA,aAAR,EAAuBC,SAAvB,EAAkCC,QAAlC,QAAiD,OAAjD;AACA,SAAQC,WAAR,QAA0B,kBAA1B;AACA,OAAOC,GAAP,MAAgB,iBAAhB;AACA,OAAOC,KAAP,MAAkB,OAAlB,C,CAEA;;;AACA,OAAO,MAAMC,WAAW,gBAAGN,aAAa,CAAC,EAAD,CAAjC;AACP,OAAO,MAAMO,YAAY,GAAG,QAAgB;EAAA;;EAAA,IAAf;IAACC;EAAD,CAAe;;EACxC,MAAMC,OAAO,GAAIC,IAAD,IAAU;IACtBL,KAAK,CACFM,IADH,CACQ,0CADR,EACoDD,IADpD,EAEGE,IAFH,CAESC,QAAD,IAAc;MAClBC,MAAM,CAACC,YAAP,CAAoBC,KAApB;MACAF,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4B,WAA5B,EAAyCJ,QAAQ,CAACH,IAAT,CAAcQ,KAAvD;MACAJ,MAAM,CAACC,YAAP,CAAoBE,OAApB,CAA4B,UAA5B,EAAwCJ,QAAQ,CAACH,IAAT,CAAcS,IAAd,CAAmBC,IAA3D;MACAC,IAAI,CAACC,IAAL,CAAU,0BAAV,EACA,2BADA,EAEA,WAFA;MAGAC,QAAQ,CAAC,YAAD,CAAR;MACAC,OAAO,CAACC,GAAR,CAAYZ,QAAZ;IAAsB,CAV1B,EAYGa,KAZH,CAYUC,GAAD,IAAS;MACdH,OAAO,CAACC,GAAR,CAAYE,GAAZ;MACAN,IAAI,CAACC,IAAL,CAAU;QACRM,IAAI,EAAE,OADE;QAERC,KAAK,EAAE,OAFC;QAGRC,IAAI,EAAE;MAHE,CAAV;IAKD,CAnBH;IAoBAN,OAAO,CAACC,GAAR,CAAYf,IAAZ;EAAkB,CArBtB,CADwC,CAwBtC;;;EACA,MAAMqB,UAAU,GAAGC,GAAG,CAACC,MAAJ,GAAaC,KAAb,CAAmB;IACpCC,KAAK,EAAEH,GAAG,CAACI,MAAJ,GAAaC,QAAb,CAAsB,2BAAtB,CAD6B;IAEpCC,QAAQ,EAAEN,GAAG,CAACI,MAAJ,GAAaC,QAAb,CAAsB,2BAAtB;EAF0B,CAAnB,CAAnB,CAzBsC,CA8BtC;;EACA,MAAMd,QAAQ,GAAGpB,WAAW,EAA5B,CA/BsC,CAiCtC;;EACA,MAAM;IAACoC,QAAD;IAAWC,YAAX;IAAyBC,SAAS,EAAE;MAAEC;IAAF;EAApC,IAAkDC,OAAO,CAAC;IAACC,QAAQ,EAAEC,WAAW,CAACd,UAAD;EAAtB,CAAD,CAA/D;EAEF,oBACI,QAAC,WAAD,CAAa,QAAb;IAAsB,KAAK,EAAE;MAACZ,IAAD;MAAO2B,KAAP;MAAcC;IAAd,CAA7B;IAAA,UACKvC;EADL;IAAA;IAAA;IAAA;EAAA,QADJ;AAKC,CAzCE;;GAAMD,Y;UA+BUJ,W;;;KA/BVI,Y;AA2Cb,eAAeA,YAAf"},"metadata":{},"sourceType":"module"}